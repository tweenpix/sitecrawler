# Bitrix Cache Warmer

üßä –£–º–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–≥–æ –∫—ç—à–∞ —Å–∞–π—Ç–æ–≤ –Ω–∞ 1–°-–ë–∏—Ç—Ä–∏–∫—Å —Å –ø–æ–º–æ—â—å—é Puppeteer.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ sitemap.xml
- üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏—è URL –ø–æ —à–∞–±–ª–æ–Ω–∞–º (`/catalog/`, `/services/`, –∏ –¥—Ä.)
- üîê –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö URL
- üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö JS-—Ä–µ—Å—É—Ä—Å–æ–≤ (Google, Yandex, VK, Facebook –∏ –¥—Ä.)
- üß† –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–≥–æ –∫—ç—à–∞ —á–µ—Ä–µ–∑ `BX.getCacheFlag()`
- üóÇ –ü—Ä–æ–≥—Ä–µ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–∞—Ç—á–∞–º–∏ –ø–æ 50 —Å—Ç—Ä–∞–Ω–∏—Ü (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Chromium –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±–∞—Ç—á–∞)
- üìä –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª —Å –¥–∞—Ç–æ–π –∑–∞–ø—É—Å–∫–∞
- üí• –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–∞—Ö –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/yourname/bitrix-cache-warmer.git
cd bitrix-cache-warmer
npm install
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Node.js >= 16
- puppeteer
- axios
- xml2js

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä—É—á–Ω—É—é:

```bash
npm install puppeteer axios xml2js
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–í–Ω–∏–∑—É `index.js` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```js
const sites = [
  'https://example.ru',
  'https://example.kz'
];

const options = {
  maxConcurrency: 2,
  maxUrlsPerSite: 500,
  timeoutPerPage: 60000,
  delay: { min: 1000, max: 3000 },
  priorityPatterns: ['/catalog/', '/products/']
};
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `userAgent`, –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞, –ª–æ–≥-–ø–∞–ø–∫—É –∏ —Ç.–¥.

## üìÑ –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤:

```
~/logs/bitrix_cache_warmer/cache_warming_YYYY-MM-DD.log
```

## üß™ –ó–∞–ø—É—Å–∫

```bash
node index.js
```

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –±–æ–ª–µ–µ 3-5 –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äî Puppeteer –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –ø–∞–º—è—Ç—å.
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—Ä–æ–Ω-–∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –Ω–æ—á–Ω–æ–π –ø—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞.
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞.

---

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Bitrix Composite Cache –±–µ–∑ –ª–∏—à–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞!**

